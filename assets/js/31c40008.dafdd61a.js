"use strict";(self.webpackChunksiglens_docs=self.webpackChunksiglens_docs||[]).push([[1636],{3800:(n,e,l)=>{l.r(e),l.d(e,{assets:()=>r,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>d,toc:()=>a});var t=l(5893),s=l(1151);const i={},o="Splunk",d={id:"log-ingestion/fluentd/fluentd-splunk",title:"Splunk",description:"- Siglens can be ingested data in Splunk format using fluentd. Install fluentd. Read more about installation here.",source:"@site/docs/log-ingestion/fluentd/fluentd-splunk.md",sourceDirName:"log-ingestion/fluentd",slug:"/log-ingestion/fluentd/fluentd-splunk",permalink:"/siglens-docs/log-ingestion/fluentd/fluentd-splunk",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Elasticsearch",permalink:"/siglens-docs/log-ingestion/fluentd/fluentd-elasticsearch"},next:{title:"Open Telemetry",permalink:"/siglens-docs/log-ingestion/open-telemetry"}},r={},a=[{value:"Install Fluentd",id:"install-fluentd",level:2},{value:"Setup for Splunk",id:"setup-for-splunk",level:3},{value:"Fluentd Configuration",id:"fluentd-configuration",level:2},{value:"Sample Configuration",id:"sample-configuration",level:2},{value:"Run Fluentd Config",id:"run-fluentd-config",level:2},{value:"Linux based systems",id:"linux-based-systems",level:3},{value:"Windows",id:"windows",level:3}];function c(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h1,{id:"splunk",children:"Splunk"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Siglens can be ingested data in Splunk format using fluentd. Install fluentd. Read more about installation ",(0,t.jsx)(e.a,{href:"#install-fluentd",children:"here"}),"."]}),"\n",(0,t.jsxs)(e.li,{children:["Make sure that the ",(0,t.jsx)(e.code,{children:"endpoint"})," in the configuration has the splunk endpoint: ",(0,t.jsx)(e.code,{children:"/splunk/services/collector/event"}),"."]}),"\n",(0,t.jsxs)(e.li,{children:["Create a fluentd config file with the below ",(0,t.jsx)(e.a,{href:"#sample-configuration",children:"sample configuration"}),". Read more about ",(0,t.jsx)(e.a,{href:"#fluentd-configuration",children:"Fluentd Config file"})," below."]}),"\n",(0,t.jsxs)(e.li,{children:["Run the command: ",(0,t.jsx)(e.code,{children:"fluentd -c logstah_config.conf"}),". Read more about ",(0,t.jsx)(e.a,{href:"#run-fluentd-config",children:"running fluentd config"})," below."]}),"\n",(0,t.jsxs)(e.li,{children:["Read more about Fluentd from the ",(0,t.jsx)(e.a,{href:"https://docs.fluentd.org/",children:"official docs here"}),"."]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"install-fluentd",children:"Install Fluentd"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Install the Fluent-package from the ",(0,t.jsx)(e.a,{href:"https://docs.fluentd.org/installation",children:"official docs"}),".","\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["For Debian/Ubuntu: ",(0,t.jsx)(e.a,{href:"https://docs.fluentd.org/installation/install-by-deb#installing-fluent-package",children:"https://docs.fluentd.org/installation/install-by-deb#installing-fluent-package"})]}),"\n",(0,t.jsxs)(e.li,{children:["For macOS: ",(0,t.jsx)(e.a,{href:"https://docs.fluentd.org/installation/obsolete-installation/treasure-agent-v4-installation/install-by-dmg-td-agent-v4",children:"https://docs.fluentd.org/installation/obsolete-installation/treasure-agent-v4-installation/install-by-dmg-td-agent-v4"})]}),"\n",(0,t.jsxs)(e.li,{children:["For Windows: ",(0,t.jsx)(e.a,{href:"https://docs.fluentd.org/installation/install-by-msi",children:"https://docs.fluentd.org/installation/install-by-msi"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.li,{children:"Follow the installation steps from the docs and install fluentd."}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"setup-for-splunk",children:"Setup for Splunk"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"Fluentd by default comes with various plugins but it does not include a plugin for Splunk."}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["Install the Splunk plugin called ",(0,t.jsx)(e.a,{href:"https://github.com/fluent/fluent-plugin-splunk",children:(0,t.jsx)(e.code,{children:"fluent-plugin-splunk-enterprise"})}),". Read more about Splunk Plugin ",(0,t.jsx)(e.a,{href:"https://docs.fluentd.org/v/0.12/output/splunk",children:"here"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"fluent-gem install fluent-plugin-splunk-enterprise\n"})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["If you're using a ",(0,t.jsx)(e.code,{children:" td-agent"}),", it's recommended to use ",(0,t.jsx)(e.code,{children:"td-agent-gem"})," instead"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"sudo td-agent-gem install fluent-plugin-splunk-enterprise\n"})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"Check that the gem is installed by running the below command"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"fluent-gem list | grep fluent-plugin-splunk-hec\n\n# OR\n\ntd-agent-gem list | grep fluent-plugin-splunk-hec\n"})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"Might need to setup or install ruby modules or development toolkit. If required it is automatically prompted and installed."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"fluentd-configuration",children:"Fluentd Configuration"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Fluentd has various input or source plugins. The below sample configuration uses plugin type called ",(0,t.jsx)(e.code,{children:"tail"}),". Read more about ",(0,t.jsx)(e.a,{href:"https://docs.fluentd.org/input",children:"input Plugins here"}),"."]}),"\n",(0,t.jsx)(e.li,{children:"The tag in source is used to to categorize the incoming data. It is is applied to all events coming from the tailed file. This tag can be used to match these events."}),"\n",(0,t.jsx)(e.li,{children:"Fluentd has filter plugins that can be used to mutate the input data from the sources."}),"\n",(0,t.jsxs)(e.li,{children:["The ",(0,t.jsx)(e.code,{children:"<match my.logs>"})," section tells Fluentd that any events tagged with my.logs should be processed by this output plugin configuration."]}),"\n",(0,t.jsxs)(e.li,{children:["The output plugin is set to ",(0,t.jsx)(e.code,{children:"splunk_hec"})," and the ",(0,t.jsx)(e.code,{children:"hec_endpoint"})," must be ",(0,t.jsx)(e.code,{children:"/splunk/services/collector/event"}),". This is the Splunk HTTP Event Collector."]}),"\n",(0,t.jsxs)(e.li,{children:["The default ingestion port for Siglens is ",(0,t.jsx)(e.code,{children:"8081"})," and the ",(0,t.jsx)(e.code,{children:"hec_host"})," is ",(0,t.jsx)(e.code,{children:"localhost"}),". The protocol needs to be set as ",(0,t.jsx)(e.code,{children:"http"})," / ",(0,t.jsx)(e.code,{children:"https"}),"."]}),"\n",(0,t.jsx)(e.li,{children:"The index field is necessary."}),"\n",(0,t.jsx)(e.li,{children:"The buffer configuration sets to send or ingest one event at a time. This is ncecessary for the ingestion to work properly."}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"sample-configuration",children:"Sample Configuration"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-conf",children:"<source>\n  @type tail\n  path D:\\Siglens\\SplunkExport.json\n  pos_file D:\\Siglens\\fluentd_logs\\SplunkExport2.log.pos\n  tag my.logs\n  read_from_head true\n  <parse>\n    @type json\n  </parse>\n</source>\n\n<match my.logs>\n  @type splunk_hec\n  host hostname\n  hec_token A94A8FE5CCB19BA61C4C08\n  hec_host localhost\n  hec_port 8081\n  hec_endpoint /splunk/services/collector/event\n  protocol http\n  index fluentd-ind-0\n  # Buffer configuration\n  <buffer>\n    chunk_limit_records 1\n    flush_at_shutdown true\n  </buffer>\n</match>\n"})}),"\n",(0,t.jsx)(e.h2,{id:"run-fluentd-config",children:"Run Fluentd Config"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"Navigate to the Fluentd installed directory, if fluentd environment is not setup."}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["Windows can open the fluentd command prompt and open it as an ",(0,t.jsx)(e.strong,{children:"Administrator"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["Run the command: ",(0,t.jsx)(e.code,{children:"fluentd -c <<path-of-fluentd-config>>"})]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.h3,{id:"linux-based-systems",children:"Linux based systems"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"sudo fluentd -c /home/fluentd_config.conf\n\n# OR\n\nsudo td-agent -c /home/fluentd_config.conf # if td-agent is installed\n"})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.h3,{id:"windows",children:"Windows"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Open the fluentd command prompt as an ",(0,t.jsx)(e.strong,{children:"Administrator"}),"."]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"fluentd -c /home/fluentd_config.conf\n"})}),"\n"]}),"\n"]})]})}function u(n={}){const{wrapper:e}={...(0,s.a)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(c,{...n})}):c(n)}},1151:(n,e,l)=>{l.d(e,{Z:()=>d,a:()=>o});var t=l(7294);const s={},i=t.createContext(s);function o(n){const e=t.useContext(i);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:o(n.components),t.createElement(i.Provider,{value:e},n.children)}}}]);