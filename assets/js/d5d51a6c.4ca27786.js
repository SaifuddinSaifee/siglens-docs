"use strict";(self.webpackChunksiglens_docs=self.webpackChunksiglens_docs||[]).push([[7201],{8235:(s,e,n)=>{n.r(e),n.d(e,{assets:()=>h,contentTitle:()=>l,default:()=>d,frontMatter:()=>t,metadata:()=>a,toc:()=>r});var i=n(5893),o=n(1151);const t={},l="Elasticsearch",a={id:"log-ingestion/logstash/logstash-elasticsearch",title:"Elasticsearch",description:"- Siglens can be ingested data in Elasticsearch format using Logstash. Install Logstash. Read more about installation here.",source:"@site/docs/log-ingestion/logstash/logstash-elasticsearch.md",sourceDirName:"log-ingestion/logstash",slug:"/log-ingestion/logstash/logstash-elasticsearch",permalink:"/siglens-docs/log-ingestion/logstash/logstash-elasticsearch",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Logstash",permalink:"/siglens-docs/category/logstash"},next:{title:"Splunk",permalink:"/siglens-docs/log-ingestion/logstash/logstash-splunk"}},h={},r=[{value:"Install Logstash",id:"install-logstash",level:2},{value:"Linux based Systems",id:"linux-based-systems",level:3},{value:"Windows",id:"windows",level:3},{value:"JVM Options",id:"jvm-options",level:3},{value:"Append at the end of Logstash/config/jvm.options",id:"append-at-the-end-of-logstashconfigjvmoptions",level:4},{value:"Logstash Configuration",id:"logstash-configuration",level:2},{value:"Sample Configuration",id:"sample-configuration",level:2},{value:"Run Logstash Config",id:"run-logstash-config",level:2},{value:"Linux based systems",id:"linux-based-systems-1",level:3},{value:"Windows",id:"windows-1",level:3}];function c(s){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...s.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"elasticsearch",children:"Elasticsearch"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Siglens can be ingested data in Elasticsearch format using Logstash. Install Logstash. Read more about installation ",(0,i.jsx)(e.a,{href:"#install-logstash",children:"here"}),"."]}),"\n",(0,i.jsxs)(e.li,{children:["Make sure that the ",(0,i.jsx)(e.code,{children:"hosts"})," in the configuration has the ",(0,i.jsx)(e.code,{children:"/elastic"})," suffix."]}),"\n",(0,i.jsxs)(e.li,{children:["Create a logstash config file with the below ",(0,i.jsx)(e.a,{href:"#sample-configuration",children:"sample configuration"}),". Read more about ",(0,i.jsx)(e.a,{href:"#logstash-configuration",children:"Logstash Config file"})," below."]}),"\n",(0,i.jsxs)(e.li,{children:["Run the command: ",(0,i.jsx)(e.code,{children:"logstash -c logstah_config.conf"}),". Read more about ",(0,i.jsx)(e.a,{href:"#run-logstash-config",children:"running logstash config"})," below."]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"install-logstash",children:"Install Logstash"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Download this exact version of ",(0,i.jsxs)(e.a,{href:"https://www.elastic.co/downloads/past-releases/logstash-oss-7-9-3",children:["Logstash: ",(0,i.jsx)(e.code,{children:"logstash-oss-7.9.3"})]}),". It is important to download this version, as this is the version that is compatible with Siglens Elasticsearch version: ",(0,i.jsx)(e.code,{children:"7.9.3"}),"."]}),"\n",(0,i.jsx)(e.li,{children:"Logstash has multiple options to choose from for different OS-based systems."}),"\n",(0,i.jsx)(e.li,{children:"Once the Logstash is downloaded. Use the below commands to install on depending on the OS."}),"\n",(0,i.jsxs)(e.li,{children:["Read more about installation from official docs ",(0,i.jsx)(e.a,{href:"https://www.elastic.co/guide/en/logstash/7.9/configuration.html",children:"here"}),"."]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"linux-based-systems",children:"Linux based Systems"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"sudo dpkg -i logstash-oss-7.9.3-amd64.deb\n# OR\ntar xzvf logstash-oss-7.9.3-linux-x86_64.tar.gz\n"})}),"\n",(0,i.jsx)(e.h3,{id:"windows",children:"Windows"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Download the Zip version."}),"\n",(0,i.jsx)(e.li,{children:"Extract the contents of the zip file into C drive."}),"\n",(0,i.jsx)(e.li,{children:"Rename the directory to Logstash."}),"\n",(0,i.jsxs)(e.li,{children:["Open a PowerShell prompt as an Administrator (right-click the PowerShell icon and select ",(0,i.jsx)(e.strong,{children:"Run As Administrator"}),")."]}),"\n",(0,i.jsx)(e.li,{children:"From the PowerShell prompt, run the following commands to install Filebeat as a Windows service:"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"PS > cd 'C:\\Logstash'\nPS C:\\Logstash> bin/logstash --version\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"The above command should print the logstash version."}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"jvm-options",children:"JVM Options"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["In the Logstash directory, there is a config directory containing the file ",(0,i.jsx)(e.code,{children:"jvm.options"}),"."]}),"\n",(0,i.jsxs)(e.li,{children:["The below lines may need to be appened to the ",(0,i.jsx)(e.code,{children:"jvm.options"})," for the logstash to work properly."]}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"append-at-the-end-of-logstashconfigjvmoptions",children:"Append at the end of Logstash/config/jvm.options"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-options",children:"--add-opens java.base/sun.nio.ch=ALL-UNNAMED\n--add-opens java.base/java.io=ALL-UNNAMED\n\n--add-opens java.base/sun.nio.ch=ALL-UNNAMED\n--add-opens java.base/java.io=ALL-UNNAMED\n--add-opens java.base/java.security=ALL-UNNAMED\n"})}),"\n",(0,i.jsx)(e.h2,{id:"logstash-configuration",children:"Logstash Configuration"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Logstash can take input from various sources. The sample configuration below is configured to take the input from a file. Read more about Logstash ",(0,i.jsx)(e.a,{href:"https://www.elastic.co/guide/en/logstash/7.9/input-plugins.html",children:"input plugins here"}),"."]}),"\n",(0,i.jsxs)(e.li,{children:["Filter plugins can be used to mutate the input data. Read more about it ",(0,i.jsx)(e.a,{href:"https://www.elastic.co/guide/en/logstash/7.9/filter-plugins.html",children:"here"}),"."]}),"\n",(0,i.jsxs)(e.li,{children:["The output plugin is configured to elasticsearch and the hosts should have the suffix ",(0,i.jsx)(e.code,{children:"/elastic"}),". So ",(0,i.jsx)(e.code,{children:'hosts => ["http://127.0.0.1:8081/elastic/"]'}),". Read more about elasticsearch and other ",(0,i.jsx)(e.a,{href:"https://www.elastic.co/guide/en/logstash/7.9/plugins-outputs-elasticsearch.html",children:"output plugins here"}),"."]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"sample-configuration",children:"Sample Configuration"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-conf",children:'input {\n  file {\n    path => "D:/Siglens/SplunkExport.json"\n    start_position => "beginning"\n  }\n}\n\noutput {\n  elasticsearch {\n    hosts => ["http://127.0.0.1:8081/elastic/"]\n    index => "logstash-logs-%{+YYYY.MM.dd}"\n    ilm_enabled => false\n    manage_template => false\n  }\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"run-logstash-config",children:"Run Logstash Config"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Navigate to Logstash folder."}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["Then run the command: ",(0,i.jsx)(e.code,{children:"bin/logstash -f <<path-of-logstash-config>>"})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["On Linux systems, use ",(0,i.jsx)(e.code,{children:"sudo"})," before the command."]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["Windows should open or run the command prompt or power shell as an ",(0,i.jsx)(e.strong,{children:"Administrator"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"The example below assume the config is in the Logstash directory."}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.h3,{id:"linux-based-systems-1",children:"Linux based systems"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"sudo bin/logstash -f ./logstash_config.conf\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.h3,{id:"windows-1",children:"Windows"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Open the command prompt or power shell as an ",(0,i.jsx)(e.strong,{children:"Administrator"})," and navigate to the Logstash directory."]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"bin/logstash -f ./logstash_config.conf\n"})}),"\n"]}),"\n"]})]})}function d(s={}){const{wrapper:e}={...(0,o.a)(),...s.components};return e?(0,i.jsx)(e,{...s,children:(0,i.jsx)(c,{...s})}):c(s)}},1151:(s,e,n)=>{n.d(e,{Z:()=>a,a:()=>l});var i=n(7294);const o={},t=i.createContext(o);function l(s){const e=i.useContext(t);return i.useMemo((function(){return"function"==typeof s?s(e):{...e,...s}}),[e,s])}function a(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(o):s.components||o:l(s.components),i.createElement(t.Provider,{value:e},s.children)}}}]);