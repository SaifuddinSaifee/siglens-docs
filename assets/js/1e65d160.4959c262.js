"use strict";(self.webpackChunksiglens_docs=self.webpackChunksiglens_docs||[]).push([[4845],{8034:(s,n,e)=>{e.r(n),e.d(n,{assets:()=>h,contentTitle:()=>l,default:()=>c,frontMatter:()=>i,metadata:()=>a,toc:()=>r});var o=e(5893),t=e(1151);const i={},l="Splunk",a={id:"log-ingestion/logstash/logstash-splunk",title:"Splunk",description:"- Siglens can be ingested data in Splunk format using Logstash through http plugin. Install Logstash. Read more about installation here.",source:"@site/docs/log-ingestion/logstash/logstash-splunk.md",sourceDirName:"log-ingestion/logstash",slug:"/log-ingestion/logstash/logstash-splunk",permalink:"/siglens-docs/log-ingestion/logstash/logstash-splunk",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Elasticsearch",permalink:"/siglens-docs/log-ingestion/logstash/logstash-elasticsearch"},next:{title:"Fluentd",permalink:"/siglens-docs/category/fluentd"}},h={},r=[{value:"Install Logstash",id:"install-logstash",level:2},{value:"Linux based Systems",id:"linux-based-systems",level:3},{value:"Windows",id:"windows",level:3},{value:"JVM Options",id:"jvm-options",level:3},{value:"Append at the end of Logstash/config/jvm.options",id:"append-at-the-end-of-logstashconfigjvmoptions",level:4},{value:"Logstash Configuration",id:"logstash-configuration",level:2},{value:"Sample Configuration",id:"sample-configuration",level:2},{value:"Run Logstash Config",id:"run-logstash-config",level:2},{value:"Linux based systems",id:"linux-based-systems-1",level:3},{value:"Windows",id:"windows-1",level:3}];function d(s){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.a)(),...s.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"splunk",children:"Splunk"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Siglens can be ingested data in Splunk format using Logstash through http plugin. Install Logstash. Read more about installation ",(0,o.jsx)(n.a,{href:"#install-logstash",children:"here"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Make sure that the ",(0,o.jsx)(n.code,{children:"hosts"})," in the configuration has the ",(0,o.jsx)(n.code,{children:"/splunk"})," suffix."]}),"\n",(0,o.jsxs)(n.li,{children:["Create a logstash config file with the below ",(0,o.jsx)(n.a,{href:"#sample-configuration",children:"sample configuration"}),". Read more about ",(0,o.jsx)(n.a,{href:"#logstash-configuration",children:"Logstash Config file"})," below."]}),"\n",(0,o.jsxs)(n.li,{children:["Run the command: ",(0,o.jsx)(n.code,{children:"logstash -c logstah_config.conf"}),". Read more about ",(0,o.jsx)(n.a,{href:"#run-logstash-config",children:"running logstash config"})," below."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"install-logstash",children:"Install Logstash"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Download Logstash-OSS version from ",(0,o.jsx)(n.a,{href:"https://www.elastic.co/downloads/logstash-oss",children:"here"})," or check ",(0,o.jsx)(n.a,{href:"https://www.elastic.co/guide/en/logstash/current/index.html",children:"official docs"})," to know more on installing Logstash."]}),"\n",(0,o.jsx)(n.li,{children:"Logstash has multiple options to choose from for different OS-based systems."}),"\n",(0,o.jsx)(n.li,{children:"Once the Logstash is downloaded. Use the below commands to install on depending on the OS."}),"\n",(0,o.jsx)(n.li,{children:"The below procedure assumes that the logstash-oss version is 7.9.3."}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"linux-based-systems",children:"Linux based Systems"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo dpkg -i logstash-oss-7.9.3-amd64.deb\n# OR\ntar xzvf logstash-oss-7.9.3-linux-x86_64.tar.gz\n"})}),"\n",(0,o.jsx)(n.h3,{id:"windows",children:"Windows"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Download the Zip version."}),"\n",(0,o.jsx)(n.li,{children:"Extract the contents of the zip file into C drive."}),"\n",(0,o.jsx)(n.li,{children:"Rename the directory to Logstash."}),"\n",(0,o.jsxs)(n.li,{children:["Open a PowerShell prompt as an Administrator (right-click the PowerShell icon and select ",(0,o.jsx)(n.strong,{children:"Run As Administrator"}),")."]}),"\n",(0,o.jsx)(n.li,{children:"From the PowerShell prompt, run the following commands to install Filebeat as a Windows service:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"PS > cd 'C:\\Logstash'\nPS C:\\Logstash> bin/logstash --version\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"The above command should print the logstash version."}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"jvm-options",children:"JVM Options"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["In the Logstash directory, there is a config directory containing the file ",(0,o.jsx)(n.code,{children:"jvm.options"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["The below lines ",(0,o.jsxs)(n.em,{children:["may need to be appened to the ",(0,o.jsx)(n.code,{children:"jvm.options"})," for the logstash"]})," to work properly."]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"append-at-the-end-of-logstashconfigjvmoptions",children:"Append at the end of Logstash/config/jvm.options"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-options",children:"--add-opens java.base/sun.nio.ch=ALL-UNNAMED\n--add-opens java.base/java.io=ALL-UNNAMED\n\n--add-opens java.base/sun.nio.ch=ALL-UNNAMED\n--add-opens java.base/java.io=ALL-UNNAMED\n--add-opens java.base/java.security=ALL-UNNAMED\n"})}),"\n",(0,o.jsx)(n.h2,{id:"logstash-configuration",children:"Logstash Configuration"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Logstash can take input from various sources. The sample configuration below is configured to take the input from a file. Read more about Logstash ",(0,o.jsx)(n.a,{href:"https://www.elastic.co/guide/en/logstash/7.9/input-plugins.html",children:"input plugins here"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Filter plugins can be used to mutate the input data. Read more about it ",(0,o.jsx)(n.a,{href:"https://www.elastic.co/guide/en/logstash/7.9/filter-plugins.html",children:"here"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["The output plugin is configured to http since Logstash do not directly have a Splunk output plugin.","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The url must be set to ",(0,o.jsx)(n.code,{children:"http://localhost:8081/splunk/services/collector/event"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["The http method is ",(0,o.jsx)(n.code,{children:"post"}),"."]}),"\n",(0,o.jsx)(n.li,{children:"The headers will have the default Splunk Token."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Read more about http and other ",(0,o.jsx)(n.a,{href:"https://www.elastic.co/guide/en/logstash/7.9/plugins-outputs-elasticsearch.html",children:"output plugins here"}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"sample-configuration",children:"Sample Configuration"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-conf",children:'input {\n  file {\n    path => "D:/Siglens/SplunkExport3.json"\n    start_position => "beginning"\n  }\n}\n\nfilter {\n  mutate {\n    add_field => {\n      "index" => "logstash3_splunk_access_logs"\n      "source" => "logstash3_source"\n    }\n  }\n  date {\n    match => [ "logdate", "ISO8601" ]\n    target => "@timestamp"\n  }\n}\n\noutput {\n  http {\n    format => "json"\n    content_type => "application/json"\n    http_method => "post"\n    url => "http://localhost:8081/splunk/services/collector/event"\n    headers => [\'Authorization\', \'A94A8FE5CCB19BA61C4C08\']\n  }\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"run-logstash-config",children:"Run Logstash Config"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Navigate to Logstash folder."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Then run the command: ",(0,o.jsx)(n.code,{children:"bin/logstash -f <<path-of-logstash-config>>"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["On Linux systems, use ",(0,o.jsx)(n.code,{children:"sudo"})," before the command."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Windows should open or run the command prompt or power shell as an ",(0,o.jsx)(n.strong,{children:"Administrator"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"The example below assume the config is in the Logstash directory."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.h3,{id:"linux-based-systems-1",children:"Linux based systems"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo bin/logstash -f ./logstash_config.conf\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.h3,{id:"windows-1",children:"Windows"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Open the command prompt or power shell as an ",(0,o.jsx)(n.strong,{children:"Administrator"})," and navigate to the Logstash directory."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"bin/logstash -f ./logstash_config.conf\n"})}),"\n"]}),"\n"]})]})}function c(s={}){const{wrapper:n}={...(0,t.a)(),...s.components};return n?(0,o.jsx)(n,{...s,children:(0,o.jsx)(d,{...s})}):d(s)}},1151:(s,n,e)=>{e.d(n,{Z:()=>a,a:()=>l});var o=e(7294);const t={},i=o.createContext(t);function l(s){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof s?s(n):{...n,...s}}),[n,s])}function a(s){let n;return n=s.disableParentContext?"function"==typeof s.components?s.components(t):s.components||t:l(s.components),o.createElement(i.Provider,{value:n},s.children)}}}]);